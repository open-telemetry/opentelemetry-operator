# One of 'breaking', 'deprecation', 'new_component', 'enhancement', 'bug_fix'
change_type: enhancement

# The name of the component, or a single word describing the area of concern, (e.g. collector, target allocator, auto-instrumentation, opamp, github action)
component: webhook

# A brief description of the change. Surround your text with quotes ("") if it needs to start with a backtick (`).
note: "Add Prometheus metrics to the pod mutation webhook to track success, failures, and skips for both sidecar injection and auto-instrumentation."

# One or more tracking issues related to the change
issues: [3702]

# (Optional) One or more lines of additional information to render under the primary note.
# These lines will be padded with 2 spaces and then inserted directly into the document.
# Use pipe (|) for multiline entries.
subtext: |
  Adds the `opentelemetry_operator_pod_mutations_total` counter metric with the following labels:
  - `mutation_type`: "sidecar" or "instrumentation"
  - `status`: "success", "skipped", "rejected", or "error"
  - `reason`: Detailed reason for non-success outcomes (e.g., "already_instrumented", "feature_disabled", "lookup_failed")
  - `k8s_namespace_name`: Kubernetes namespace of the mutated pod
  - `language`: Programming language for instrumentation mutations (e.g., "java", "python", "nodejs")
  
  Example PromQL queries:
  - Total successful instrumentations: `sum(opentelemetry_operator_pod_mutations_total{status="success"})`
  - Error rate by language: `sum by (language) (rate(opentelemetry_operator_pod_mutations_total{status="error"}[5m]))`

