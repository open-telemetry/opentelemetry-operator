exporters:
  logging: null
processors: null
receivers:
  prometheus:
    config:
      global:
        scrape_interval: 1m
        scrape_timeout: 10s
        evaluation_interval: 1m
      scrape_configs:
      - job_name: service-x
        honor_timestamps: true
        scrape_interval: 1m
        scrape_timeout: 10s
        metrics_path: /metrics
        scheme: http
        follow_redirects: true
        enable_http2: true
        relabel_configs:
        - source_labels: [label1]
          separator: ;
          regex: (.*)
          replacement: $$1
          action: keep
        - source_labels: [label2]
          separator: ;
          regex: (.*)
          target_label: label3
          replacement: $$1_$2
          action: replace
        - source_labels: [label4]
          separator: ;
          regex: (.*)
          replacement: $$1
          action: labelmap
        - separator: ;
          regex: foo_.*
          replacement: $$1
          action: labeldrop
        metric_relabel_configs:
        - source_labels: [label1]
          separator: ;
          regex: (.*)
          replacement: $1
          action: keep
        - source_labels: [label4]
          separator: ;
          regex: (.*)
          replacement: $$1
          action: labelmap
        http_sd_configs:
        - follow_redirects: false
          enable_http2: false
          url: http://test-targetallocator:80/jobs/service-x/targets?collector_id=$POD_NAME
service:
  pipelines:
    metrics:
      exporters:
      - logging
      processors: []
      receivers:
      - prometheus
