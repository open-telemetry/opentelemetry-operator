apiVersion: opentelemetry.io/v1beta1
kind: OpenTelemetryCollector
metadata:
  name: deployment
spec:
  # NOTE: Skip v0.133.0 comes with otlp metrics unmarshal issues.
  # See for details:
  # https://github.com/open-telemetry/opentelemetry-dotnet/issues/6464
  # https://github.com/open-telemetry/opentelemetry-collector/issues/13727
  image: otel/opentelemetry-collector:0.134.0-nightly.202508310234
  mode: deployment
  config:
    receivers:
      otlp:
        protocols:
          grpc: {}
          http: {}

    processors: {}

    exporters:
      debug:
        verbosity: detailed

    service:
      pipelines:
        traces:
          receivers: [otlp]
          exporters: [debug]
        metrics:
          receivers: [otlp]
          exporters: [debug]
