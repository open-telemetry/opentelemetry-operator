apiVersion: v1
kind: Pod
metadata:
  annotations:
    sidecar.opentelemetry.io/inject: "true"
  labels:
    app: my-pod-with-sidecar
spec:
  (length(volumes[?starts_with(name, 'configmap-example-config')]) > `0`): true
  containers:
  - name: myapp
  initContainers:
  - name: otc-container
    (length(volumeMounts[?starts_with(name, 'configmap-example-config')]) > `0`): true
    env:
    - name: POD_NAME
    - name: GOMEMLIMIT
    - name: GOMAXPROCS
    - name: OTEL_CONFIG
    - name: OTEL_RESOURCE_ATTRIBUTES_POD_NAME
    - name: OTEL_RESOURCE_ATTRIBUTES_POD_UID
    - name: OTEL_RESOURCE_ATTRIBUTES_NODE_NAME
    - name: OTEL_RESOURCE_ATTRIBUTES
status:
  phase: Running
