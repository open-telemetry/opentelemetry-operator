apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-cr-ns-discovery-v1beta1-targetallocator
data:
  targetallocator.yaml:
    ( contains(@, 'pod_monitor_namespace_selector:') ): true
    ( contains(@, 'service_monitor_namespace_selector:') ): true
    ( contains(@, 'scrape_config_namespace_selector:') ): true
    ( contains(@, 'probe_namespace_selector:') ): true
    ( contains(@, join(':', ['ns-label', ' targetallocator-e2e'])) ): true
---
apiVersion: batch/v1
kind: Job
metadata:
  name: check-ta-ns-discovery-v1beta1
status:
  succeeded: 1
